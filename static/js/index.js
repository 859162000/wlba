// Generated by CoffeeScript 1.7.1
(function() {
  require.config({
    paths: {
      jquery: 'lib/jquery.min',
      underscore: 'lib/underscore-min',
      knockout: 'lib/knockout-3.0.0'
    }
  });

  require(['jquery', 'underscore', 'knockout', 'lib/backend'], function($, _, ko, backend) {
    return $(document).ready(function() {
      var DataViewModel, model, switchBackground, switchBackgroundWrapper;
      DataViewModel = (function() {
        function DataViewModel() {
          var self;
          self = this;
          self.trusts = ko.observable(_.pluck(data.hot_trusts, 'trust'));
          self.funds = ko.observable(_.pluck(data.hot_funds, 'fund'));
          self.financings = ko.observable(_.pluck(data.hot_financings, 'bank_financing'));
        }

        return DataViewModel;

      })();
      model = new DataViewModel();
      ko.applyBindings(model);
      switchBackground = function(max) {
        var current, imageUrl, matches;
        imageUrl = $('.big-background').css('background-image');
        matches = imageUrl.match(/\/bg(\d).jpg/);
        if (matches.length === 2) {
          current = parseInt(matches[1]) + 1;
          if (current > max) {
            current = 1;
          }
          return $('.big-background').css('background-image', imageUrl.replace(/\/bg\d.jpg/, '/bg' + current + '.jpg'));
        }
      };
      switchBackgroundWrapper = function() {
        switchBackground(4);
        return setTimeout(switchBackgroundWrapper, 10 * 1000);
      };
      return setTimeout(switchBackgroundWrapper, 10 * 1000);
    });
  });

}).call(this);

//# sourceMappingURL=index.map
