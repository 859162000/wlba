// Generated by CoffeeScript 1.7.1
(function() {
  require.config({
    paths: {
      jquery: 'lib/jquery.min'
    }
  });

  require(['jquery', 'lib/backend'], function($, backend) {
    $('#sendValidateCodeButton').click(function(event) {
      var count, element, intervalId, target, timerFunction;
      target = $(event.target).attr('data-url');
      element = event.target;
      $.post(target).done(function() {
        return $('#nextStep').prop('disabled', false);
      });
      count = 60;
      $(element).prop('disabled', true);
      timerFunction = function() {
        if (count >= 1) {
          count--;
          return $(element).html('已经发送(' + count + ')');
        } else {
          clearInterval(intervalId);
          $(element).html('重新获取');
          return $(element).prop('disabled', false);
        }
      };
      timerFunction();
      return intervalId = setInterval(timerFunction, 1000);
    });
    $('#nextStep').click(function(e) {
      var target, validate_code;
      target = $(e.target).attr('data-url');
      validate_code = $('input[name="validate_code"]').val();
      if (validate_code === '') {
        alert('验证码不能为空');
        return;
      }
      return $.post(target, {
        "validate_code": validate_code
      }).done(function() {
        return window.location = '/accounts/password/reset/set_password/';
      }).fail(function() {
        return alert('验证失败!');
      });
    });
    return $('#validate_form').on('submit', function(e) {
      e.preventDefault();
      return $('#nextStep').click();
    });
  });

}).call(this);

//# sourceMappingURL=resetPasswordValidateUser.map
