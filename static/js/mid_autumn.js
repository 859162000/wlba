// Generated by CoffeeScript 1.8.0
(function() {
  require.config({
    paths: {
      jquery: 'lib/jquery.min'
    }
  });

  require(['jquery'], function($) {

    var checkMobile, container, csrfSafeMethod, getCookie, msg_count, sameOrigin, _showModal;
    getCookie = function(name) {
      var cookie, cookieValue, cookies, i;
      cookieValue = null;
      if (document.cookie && document.cookie !== "") {
        cookies = document.cookie.split(";");
        i = 0;
        while (i < cookies.length) {
          cookie = $.trim(cookies[i]);
          if (cookie.substring(0, name.length + 1) === (name + "=")) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
          i++;
        }
      }
      return cookieValue;
    };
    csrfSafeMethod = function(method) {
      return /^(GET|HEAD|OPTIONS|TRACE)$/.test(method);
    };
    sameOrigin = function(url) {
      var host, origin, protocol, sr_origin;
      host = document.location.host;
      protocol = document.location.protocol;
      sr_origin = "//" + host;
      origin = protocol + sr_origin;
      return (url === origin || url.slice(0, origin.length + 1) === origin + "/") || (url === sr_origin || url.slice(0, sr_origin.length + 1) === sr_origin + "/") || !(/^(\/\/|http:|https:).*/.test(url));
    };
    $.ajaxSetup({
      beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
          xhr.setRequestHeader("X-CSRFToken", getCookie("csrftoken"));
        }
      }
    });


    //模态口
    var body_h=$('body').height();
    $('#small-zc').height(body_h);
    //关闭模态窗
    $('.first-xl-off,.first-xl-off2,.look,.agin').on('click',function(){
      $('#small-zc').hide();
    });

    //阻止冒泡
     $('.xl-box1,#seven-success,#activity-over,#gjw-success').on('click',function(event){
       if (event.stopPropagation){
         event.stopPropagation();
       }else{
         event.cancelBubble = true;
       }

     });
    //关闭提示
    $('.xl-off2').on('click',function(){
      $('#first-redpack-fail').hide()
    })

    //赶集网效果//滑动到相应区域
    $('#prize-two').on('click',function(){
      var re_top=$('#recharge').offset().top;
      $('body,html').animate({scrollTop:re_top}, 600);
      return false
    })
    $('#prize-four').on('click',function(){
      var re_top2=$('#tour').offset().top;
      $('body,html').animate({scrollTop:re_top2}, 600);
      return false
    })

    // 展开效果
    $('#rule1').on('click',function(){
      $('#ul-rule1').slideToggle();
    })
    $('#rule2').on('click',function(){
      $('#ul-rule2').slideToggle();
    })
    $('#rule3').on('click',function(){
      $('#ul-rule3').slideToggle();
    })

    //立即领取
    $('.git-btn').on('click',function(){
      if ($(this).attr('data-num')){
        window.location.href="/accounts/login/?next=/activity/mid_autumn/"
      }else {
        $.ajax({
          url: "/redpacket/apply/",
          type: "POST",
          data: { redpack_event_name : "2015中秋节80000加息券"}
        }).done(function(date) {
          if (date['status']== true){
            $('#small-zc').show();
            $('#first-redpack-fail').hide();
            $('#txt').show();
            $('#happy').text('恭喜您～领取成功');
            $('#seven-success').show();
          }else{
            $('#small-zc').show();
            $('#first-redpack-fail').hide();
            $('#happy').text('亲，不可重复领取');
            $('#txt').show();
            $('#seven-success').show();
          }
        })
      }
    })

    //立即投资领取
    $('.touzi-btn').on('click',function(){
      if ($(this).attr('data-num')){
        window.location.href="/accounts/login/?next=/activity/mid_autumn/"
      }else {
        $('#small-zc').show();
        $('#seven-success').hide();
        $('#first-redpack-fail').show();
      }
    })

    $('.touzi-btn2').on('click',function(){
      if ($(this).attr('data-num')){
        window.location.href="/accounts/login/?next=/activity/mid_autumn/"
      }else {
        $('#small-zc').show();
        $('#seven-success').hide();
        $('#first-redpack-fail').show();
      }
    })









  });

}).call(this);



//# sourceMappingURL=login_modal.js.map

