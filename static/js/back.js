// Generated by CoffeeScript 1.8.0
(function() {
  require.config({
    paths: {
      jquery: 'lib/jquery.min',
      'jquery.modal': 'lib/jquery.modal.min',
      'jquery.placeholder': 'lib/jquery.placeholder',
      tools: 'lib/modal.tools'
    },
    shim: {
      'jquery.modal': ['jquery'],
      'jquery.placeholder': ['jquery']
    }
  });

  require(['jquery', 'lib/modal', 'lib/backend', 'tools', 'jquery.placeholder', 'lib/calculator'], function($, modal, backend, tool, placeholder) {
    /*设置密码提交表单 */
    $('#nextBtn').click(function() {
      var id, parent, phone, reg, res, select, sfzError, yhkError, yhkh, yhkhError;
      parent = $('.setTradingPwd1');
      phone = $(this).attr('data-phone');
      id = $.trim(parent.find('.sfz').val());
      select = $('#card-select1').val();
      yhkh = $.trim($('.yhkh').val());
      reg = new RegExp(/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/);
      $('.errorS').html('').hide();
      sfzError = parent.find('#sfzError');
      yhkError = parent.find('#yhkError');
      yhkhError = parent.find('#yhkhError');
      res = /^\d{10,20}$/;
      if (id === '') {
        sfzError.show().addClass('errorS').html('<i></i>请输入身份证号码');
        return;
      } else {
        if (!reg.test(id)) {
          sfzError.show().addClass('errorS').html('<i></i>身份证信息有误');
          return;
        } else {
          sfzError.show().removeClass('errorS').html('<i></i>');
        }
      }
      if (select === '') {
        yhkError.show().addClass('errorS').html('<i></i>请输选择银行卡');
        return;
      } else {
        yhkError.show().removeClass('errorS').html('<i></i>');
      }
      if (yhkh === '') {
        yhkhError.show().addClass('errorS').html('<i></i>请输入银行卡号');
        return;
      } else {
        if (!res.test(yhkh)) {
          yhkhError.show().addClass('errorS').html('<i></i>卡号无效');
          return;
        } else {
          yhkhError.show().removeClass('errorS').html('<i></i>');
        }
      }
      return $.ajax({
        url: "/api/trade_pwd/",
        type: "POST",
        data: {
          action_type: 3,
          card_id: yhkh,
          citizen_id: id,
          requirement_check: 1
        }
      }).success(function(date) {
        if (date.ret_code === 5) {
        } else {
          return tool.modalAlert({
            title: '温馨提示',
            msg: date.message
          });
        }
      });
    });
  });

}).call(this);

//# sourceMappingURL=withdraw.js.map
