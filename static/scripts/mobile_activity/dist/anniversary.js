!function(){window.alert=function(a,b){if(document.getElementById("alert-cont"))document.getElementById("alertTxt").innerHTML=a,document.getElementById("popubMask").style.display="block",document.getElementById("alert-cont").style.display="block";else{var c=document.createElement("DIV");c.id="popubMask",c.style.cssText="position:fixed;bottom:0;top:0;width:100%; background:rgba(0,0,0,0.5); z-index:1000000;";var d=document.createElement("DIV");d.id="alert-cont",d.style.cssText="position:fixed; top:35%;left:50%; width:14rem; margin:-2.75rem 0 0 -7rem; background:#fafafa; border-radius:.3rem;z-index:1000001;",strHtml="<div id='alertTxt' class='popub-txt' style='color:#333;font-size: .9rem!important;padding: 1.25rem .75rem;'>"+a+"</div>",strHtml+=' <div class="popub-footer" style="width: 100%;padding: .5rem 0;font-size: .9rem;text-align: center;color: #4391da;border-top: 1px solid #d8d8d8;border-bottom-left-radius: .25rem;border-bottom-right-radius: .25rem;" onclick="doOk()">确认</div>',d.innerHTML=strHtml,document.body.appendChild(d),document.body.appendChild(c),this.doOk=function(){d.style.display="none",c.style.display="none",b&&b()}}document.body.onselectstart=function(){return!1}}}();var org=function(){document.body.addEventListener("touchstart",function(){});var a={scriptName:"anniversary.js",_ajax:function(b){$.ajax({url:b.url,type:b.type,data:b.data,dataType:b.dataType,beforeSend:function(c,d){b.beforeSend&&b.beforeSend(c),!a._csrfSafeMethod(d.type)&&a._sameOrigin(d.url)&&c.setRequestHeader("X-CSRFToken",a._getCookie("csrftoken"))},success:function(a){b.success&&b.success(a)},error:function(a){b.error&&b.error(a)},complete:function(){b.complete&&b.complete()}})},_getCookie:function(a){var b,c,d,e;if(c=null,document.cookie&&""!==document.cookie)for(d=document.cookie.split(";"),e=0;e<d.length;){if(b=$.trim(d[e]),b.substring(0,a.length+1)===a+"="){c=decodeURIComponent(b.substring(a.length+1));break}e++}return c},_csrfSafeMethod:function(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)},_sameOrigin:function(a){var b,c,d,e;return b=document.location.host,d=document.location.protocol,e="//"+b,c=d+e,a===c||a.slice(0,c.length+1)===c+"/"||a===e||a.slice(0,e.length+1)===e+"/"||!/^(\/\/|http:|https:).*/.test(a)},_setShareData:function(a,b,c){var d={};if("object"==typeof a)for(var e in a)d[e]=a[e];return"function"==typeof b&&"undefined"!=b?d.success=b:"","function"==typeof c&&"undefined"!=c?d.cancel=c:"",d},_onMenuShareAppMessage:function(b,c,d){wx.onMenuShareAppMessage(a._setShareData(b,c,d))},_onMenuShareTimeline:function(b,c,d){wx.onMenuShareTimeline(a._setShareData(b,c,d))},_onMenuShareQQ:function(){wx.onMenuShareQQ(a._setShareData(ops,suFn,canFn))}};return{scriptName:a.scriptName,ajax:a._ajax,getCookie:a._getCookie,csrfSafeMethod:a._csrfSafeMethod,sameOrigin:a._sameOrigin,onMenuShareAppMessage:a._onMenuShareAppMessage,onMenuShareTimeline:a._onMenuShareTimeline,onMenuShareQQ:a._onMenuShareQQ}}();org.anniversary=function(a){var b=0,c=0,d={weiURL:"/weixin/api/jsapi_config/",init:function(){d._scrollFun(),d._gameFun(),d._aboutPageFun(),d._winningList(),d._share()},_scrollFun:function(){var a,b=1;a=setInterval(function(){-parseInt($("#users").css("top"))>=$("#users li").height()?($("#users li").eq(0).appendTo($("#users")),$("#users").css({top:"0px"}),b=0):(b++,$("#users").css({top:-b+"px"}))},30)},_gameFun:function(){$(".rotateImg").rotate({bind:{click:function(){$(".rotateImg").hasClass("rotateImgNo")||(c>0?a.ajax({url:"/api/celebrate/awards/",type:"POST",data:{action:"AWARD_DONE"},success:function(a){if($(".rotateImg").addClass("rotateImgNo"),"3016"==a.ret_code)$(".errorWin").find("#errorContent").text("抱歉～您不符合参加规则"),$(".errorWin").modal();else if(a.left>=0)if(a.left>=0){50==a.amount?b=3:200==a.amount?b=2:500==a.amount?b=1:1e3==a.amount&&(b=0);var d=runzp(b);$(".rotateImg").rotate({duration:3e3,angle:0,animateTo:1440+d.angle,callback:function(){$(".page,.winningDiv").show(),$("#moeny").text(d.prize);var a=$(".zhuanpanDiv").offset().top,b=$(".zhuanpanDiv").offset().left;$(".winningDiv").css({top:a,left:b}),$(".page").width(document.body.clientWidth),$(".page").height(document.body.clientHeight),$(".rotateImg").removeClass("rotateImgNo"),c--}})}else $(".errorWin").find("#errorContent").text("抱歉～您不符合参加规则"),alert($(".errorWinDiv").html())}}):($(".errorWin").find("#errorContent").text("抱歉～您不符合参加规则"),alert($(".errorWinDiv").html())))}}})},_aboutPageFun:function(){$(".bannerFonts").addClass("bannerFontsHover"),$(".spanBtn,.againBtn").on("click",function(){$(".page,.winningDiv").hide()}),$("#checkUserStatus").on("click",function(){$(this).hasClass("newUser")?$(".errorWin").find("#errorContent").text("不能重复领取～亲"):$(".errorWin").find("#errorContent").text("抱歉～您不符合参加规则"),alert($(".errorWinDiv").html())}),a.ajax({url:"/api/celebrate/awards/",type:"POST",data:{action:"IS_VALID"},success:function(b){"3001"==b.ret_code?(a.ajax({url:"/api/celebrate/awards/",type:"POST",data:{action:"ENTER_WEB_PAGE"},success:function(a){c=a.left}}),$("#checkUserStatus").addClass("newUser")):"3000"==b.ret_code&&$("#checkUserStatus").addClass("oldUser")}})},_winningList:function(){a.ajax({url:"/api/celebrate/awards/",type:"POST",data:{action:"GET_AWARD"},async:!1,success:function(a){var b="",c=0;a.data.length>0&&($.each(a.data,function(a,d){if(a%2==0?oddStyle="odd":oddStyle="",0!=a)if(a%5==0){if(c++,1==c)b+="<li class="+oddStyle+"><span>恭喜<em>135****2035</em>获得</span><label>200元红包</label></li>";else if(2==c)b+="<li class="+oddStyle+"><span>恭喜<em>186****0386</em>获得</span><label>500元红包</label></li>";else if(3==c)b+="<li class="+oddStyle+"><span>恭喜<em>150****7917</em>获得</span><label>Beats耳机</label></li>";else if(4==c)b+="<li class="+oddStyle+"><span>恭喜<em>189****2528</em>获得</span><label>电动滑板车</label></li>";else if(5==c)b+="<li class="+oddStyle+"><span>恭喜<em>133****0525</em>获得</span><label>Beats耳机</label></li>";else if(6==c)b+="<li class="+oddStyle+"><span>恭喜<em>182****7831</em>获得</span><label>500元红包</label></li>";else if(7==c)b+="<li class="+oddStyle+"><span>恭喜<em>188****5117</em>获得</span><label>乐视电视</label></li>";else if(8==c)return b+="<li class="+oddStyle+"><span>恭喜<em>138****1219</em>获得</span><label>1000元红包</label></li>",c=0,!0}else b+="<li class="+oddStyle+"><span>恭喜<em>"+d.phone.substring(0,3)+"****"+d.phone.substring(7,12)+"</em>获得</span><label>"+d.awards+"元红包</label></li>";else b+="<li class="+oddStyle+"><span>恭喜<em>"+d.phone.substring(0,3)+"****"+d.phone.substring(7,12)+"</em>获得</span><label>"+d.awards+"元红包</label></li>"}),$("#users").append(b))}})},_share:function(){var b=["scanQRCode","onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ"];a.ajax({type:"GET",url:d.weiURL,dataType:"json",success:function(a){wx.config({debug:!1,appId:a.appId,timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature,jsApiList:b})}}),wx.ready(function(){var b="https://www.wanglibao.com",c=b+"/static/imgs/mobile/share_logo.png",d=b+"/activity/anniversary/",e="网利宝周年庆喊你领红包",f="四重豪礼倾情钜惠，千万现金红包、全场加息High不停！速速去领>>";a.onMenuShareAppMessage({title:e,desc:f,link:d,imgUrl:c}),a.onMenuShareTimeline({title:e,link:d,imgUrl:c}),a.onMenuShareQQ({title:e,desc:f,link:d,imgUrl:c})})}};return{init:d.init}}(org),org.anniversaryWap=function(a){var b={init:function(){$(".bannerFonts").addClass("bannerFontsHover"),$(".rotateImg").on("click",function(){alert($(".errorWinDiv").html())});var b,c=1;b=setInterval(function(){-parseInt($("#users").css("top"))>=$("#users li").height()?($("#users li").eq(0).appendTo($("#users")),$("#users").css({top:"0px"}),c=0):(c++,$("#users").css({top:-c+"px"}))},30),a.ajax({url:"/api/celebrate/awards/",type:"POST",data:{action:"GET_AWARD"},async:!1,success:function(a){var b="",c=0;a.data.length>0&&($.each(a.data,function(a,d){if(a%2==0?oddStyle="odd":oddStyle="",0!=a)if(a%5==0){if(c++,1==c)b+="<li class="+oddStyle+"><span>恭喜<em>135****2035</em>获得</span><label>200元红包</label></li>";else if(2==c)b+="<li class="+oddStyle+"><span>恭喜<em>186****0386</em>获得</span><label>500元红包</label></li>";else if(3==c)b+="<li class="+oddStyle+"><span>恭喜<em>150****7917</em>获得</span><label>Beats耳机</label></li>";else if(4==c)b+="<li class="+oddStyle+"><span>恭喜<em>189****2528</em>获得</span><label>电动滑板车</label></li>";else if(5==c)b+="<li class="+oddStyle+"><span>恭喜<em>133****0525</em>获得</span><label>Beats耳机</label></li>";else if(6==c)b+="<li class="+oddStyle+"><span>恭喜<em>182****7831</em>获得</span><label>500元红包</label></li>";else if(7==c)b+="<li class="+oddStyle+"><span>恭喜<em>188****5117</em>获得</span><label>乐视电视</label></li>";else if(8==c)return b+="<li class="+oddStyle+"><span>恭喜<em>138****1219</em>获得</span><label>1000元红包</label></li>",c=0,!0}else b+="<li class="+oddStyle+"><span>恭喜<em>"+d.phone.substring(0,3)+"****"+d.phone.substring(7,12)+"</em>获得</span><label>"+d.awards+"元红包</label></li>";else b+="<li class="+oddStyle+"><span>恭喜<em>"+d.phone.substring(0,3)+"****"+d.phone.substring(7,12)+"</em>获得</span><label>"+d.awards+"元红包</label></li>"}),$("#users").append(b))}})}};return{init:b.init}}(org),function(a){$.each($("script"),function(){var b=$(this).attr("src");b&&b.indexOf(a.scriptName)>0&&$(this).attr("data-init")&&a[$(this).attr("data-init")]&&a[$(this).attr("data-init")].init()})}(org);