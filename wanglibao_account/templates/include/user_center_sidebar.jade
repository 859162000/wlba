style.
    .sidebar li a em.icon-trans{
        background: url("/static/images/transfer-img.png") no-repeat;
        background-position: -29px 0;
    }
    .sidebar li a em.icon-trans:hover{
        background-position: 0 0;
    }
    .sidebar li a:hover{
        color: rgb(228, 55, 31);
    }
    .gary {
        background: #f9faf9;
    }



mixin sidebar-item(name, link, target, mark, sty, last, action)
    unless target
        target = '_self'
    unless mark
        mark = ''
    unless sty
        sty = ''
    unless last
        last = ''
    if activeItem == name or activeSubItem == name
        if mark == '1'
            li.sidebar-item-title.gary.activeA
                a(href= link, target=target)=name
        else
            if action
                li.sidebar-item.active
                    a(href=link+'?action='+action, target=target)
                        em(class=sty)
                        if last == 'last'
                            span(class='last')=name
                        else
                            if last == 'msg'
                                span=name
                                i.letter 18
                            else
                                span=name
            else
                li.sidebar-item.active
                    a(href=link, target=target)
                        em(class=sty)
                        if last == 'last'
                            span(class='last')=name
                        else
                            if last == 'msg'
                                span=name
                                i.letter 18
                            else
                                span=name

    else
        if mark == '1'
            li.sidebar-item-title.gary
                a(href= link, target=target)=name
        else
            li.sidebar-item
                if action
                    a(href=link+'?action='+action, target=target)
                        em(class=sty)
                        if last == 'last'
                            span(class='last')=name
                        else
                            if last == 'msg'
                                span=name
                                i.letter 18
                            else
                                span=name
                else
                    a(href=link, target=target)
                        em(class=sty)
                        if last == 'last'
                            span(class='last')=name
                        else
                            if last == 'msg'
                                span=name
                                i.letter 18
                            else
                                span=name
ul
    +sidebar-item('账户总览', "/accounts/home/", '_self', '1', '0')
.box
    .box-title 资金管理
    ul.sidebar
        +sidebar-item('充值', '/pay/banks/', '_self', '0', 'icon1')
        +sidebar-item('提现', '/pay/withdraw/', '_self', '0', 'icon2')
        +sidebar-item('银行卡管理', '/accounts/bankcard/', '_self', '0', 'icon3', 'last')
.box
    .box-title 投资管理
    ul.sidebar
        - var classes = ['sidebar-item']
        if activeItem == '交易记录' or activeItem == '货基交易记录'
            classes = ['sidebar-item', 'active']
        li(class=classes)#sidebar-second
            +sidebar-item('交易记录', '/accounts/transaction/p2p/', '_self', '0', 'icon4')
        - var didplay = 'display:none'
        if activeItem == '交易记录' or activeItem == '货基交易记录'
            display = 'display:block'
            ul.sidebar-secondary(style=display)
                +sidebar-item('散标交易记录', '/accounts/transaction/p2p/')
                +sidebar-item('月利宝/转让标', '/ylb/center.php', '_self', '0', '', '', 'buylog')
        +sidebar-item('债权转让', '/ylb/exchange.php', '_self', '0', 'icon5', 'last', 'lists')
        +sidebar-item('自动投标', '/accounts/auto_tender/', '_self', '0', 'icon13', 'last')
.box
    .box-title 活动奖励
    ul.sidebar
        +sidebar-item('理财券', '/accounts/coupon/unused/', '_self', '0', 'icon6')
        +sidebar-item('全民淘金', '/accounts/invite/', '_self', '0', 'icon7')
        +sidebar-item('激活迅雷会员', 'http://act.vip.xunlei.com/vip/2014/xlhyk/', '_blank', '0', 'icon8', 'last')
.box
    .box-title 会员信息
    ul.sidebar
        +sidebar-item('实名认证', '/accounts/id_verify/', '_self', '0', 'icon9')
        +sidebar-item('密码管理', '/accounts/setting/', '_self', '0', 'icon10')
        +sidebar-item('站内信', '/accounts/message/', '_self', '0', 'icon11', 'msg')
        +sidebar-item('收货地址', '/accounts/address/', '_self', '0', 'icon12', 'last')
//mixin sidebar-item(name, link, target, mark)
//  unless target
//    target = '_self'
//  unless mark
//    mark = ''
//  if activeItem == name
//    li.sidebar-item.active
//      a(href=link, target=target)= name
//      if mark == '1'
//        span.newGif
//  else
//    li.sidebar-item
//      a(href=link, target=target)= name
//      if mark == '1'
//          span.newGif
//
//ul.sidebar
//  +sidebar-item('账户总览', 'http://source.wanglibao.com/monthly.php')
//  +sidebar-item('充值', '/pay/banks/')
//  +sidebar-item('理财券', '/accounts/coupon/unused/')
//  //+sidebar-item('彩票', '/accounts/caipiao')
//  +sidebar-item('提现', '/pay/withdraw/')
//
//  +sidebar-item('交易记录', 'http://source.wanglibao.com/user_amortization.php')
//  +sidebar-item('银行卡', '/accounts/bankcard/')
//  +sidebar-item('债权转让', 'http://source.wanglibao.com/exchange.php')
//  +sidebar-item('自动投标', '/accounts/auto_tender/', '_self', '1')
//
//ul.sidebar
//  +sidebar-item('全民淘金', '/accounts/invite/')
//  +sidebar-item('实名认证', '/accounts/id_verify/')
//  +sidebar-item('站内信', '/accounts/message/')
//  +sidebar-item('我的收藏', '/accounts/favorite/')
//  +sidebar-item('修改密码', '/accounts/setting/')
//  +sidebar-item('激活迅雷会员', 'http://act.vip.xunlei.com/vip/2014/xlhyk/', '_blank')
//  +sidebar-item('收货地址', '/accounts/address/')
script(src="/static/js/lib/jquery.min.js")
script.
    console.log($('.letter').text())
    $.ajax({
        url: "/api/php/unread_messages/",
        type: "GET"
    }).done(function (data) {
        var date = JSON.parse(data)
        var num = date.unread_num;
        if (num == 0){
            $('.letter').hide();
        }else{
            $('.letter').show();
            $('.letter').text(num)
        }

    });
