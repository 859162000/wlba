{% extends "trust_base.html" %}

{% load formatters %}
{% load static %}

{% block content %}
  {{ block.super }}
  <div class="container">
    <div class="ad-panel"></div>
  </div>
  <div class="space-vertical-s"></div>
  <div class="panel">
    <div class="panel-title-bar">
      <div class="panel-title">最新信托产品</div><a href="#" class="panel-title-right-item">更多</a>
    </div>
    <table class="trust-table">
      <thead>
      <tr>
        <th colspan="1"></th>
        <th colspan="4">产品名称</th>
        <th colspan="2">资金门槛</th>
        <th colspan="2">产品期限</th>
        <th colspan="2">预期收益</th>
        <th colspan="2">投资行业</th>
        <th colspan="2">信托分类</th>
        <th colspan="2">信托公司</th>
        <th colspan="2"></th>
      </tr>
      </thead>
      <tbody>

      {% for trust in latest_trusts %}
        <tr>
          <td colspan="1">{{ forloop.counter }}</td>
          <td colspan="4">{{ trust.name }}</td>
          <td colspan="2">{{ trust.investment_threshold | money_to_10k }}</td>
          <td colspan="2">{{ trust.period | month }}</td>
          <td colspan="2">{{ trust.expected_earning_rate | percentage }}</td>
          <td colspan="2">{{ trust.usage }}</td>
          <td colspan="2">{{ trust.type }}</td>
          <td colspan="2">{{ trust.issuer.name }}</td>
          <td colspan="2"><a href="#" class="button button-mini button-warning">详情</a></td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="space-vertical-m"></div>
  <div class="panel">
    <div class="panel-title-bar">
      <div class="panel-title">排行榜</div>
      <div data-bind="foreach: tabTree" class="panel-tabs">
        <div data-bind="css: {active: name == ($root.selectedTab()).name}" class="panel-tab"><a href="#" data-bind="text: $data.name, click: $root.setSelectedTab">名字</a></div>
      </div>
    </div>
    <div data-bind="foreach: selectedTab().values" class="panel-sub-tabs"><a href="#" data-bind="text: name, click: $root.setSelectedValue" class="panel-sub-tab">名字</a></div>
    <div class="panel-content">
      <!-- ko template: {name: 'trust-table', data: trusts}-->
      <!-- /ko-->
    </div>
  </div>
  <div class="space-vertical-m"></div>
{% endblock content %}

{% block ko-template %}
  {% include "templates.html" %}
{% endblock %}

{% block javascript %}
  {{  block.super }}
  <script src="{% static "wanglibao/js/underscore-min.js" %}"></script>
  <script src="{% static "wanglibao/js/knockout-3.0.0.js" %}"></script>
  <script src="{% static "wanglibao/javascripts/trust_home.js" %}"></script>
{% endblock %}