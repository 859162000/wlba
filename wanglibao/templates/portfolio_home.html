{% extends "navigation_base.html" %}

{% load static %}

{% block stylesheet %}
  <link href="{% static "wanglibao/stylesheets/jquery.modal.css" %}" media="screen, projection" rel="stylesheet" type="text/css">
  {{ block.super }}
{% endblock %}

{% block content %}
  {{ block.super }}

  <div style="margin-top:-10px" class="bar consult-background">
    <div class="row"><span class="bar--title">您的资产净值</span></div>
    <div class="row">
      <div class="span5">
        <div class="bar--input--group">
          <input type="text" value="" data-bind="value: asset" class="pull-left bar--input"><span class="pull-left input--add-on">万元</span>
        </div>
        <div class="space-s"></div><a class="button button-happy button-large">找方案</a>
      </div>
      <div class="span6-omega prefix1">
        <div class="pull-right"><a href="#propertyPlan" rel="modal:open" class="button button-warning button-small">定制详细方案</a></div>
      </div>
    </div>
  </div>
  <div class="space-vertical-s"></div>
  <div class="panel">
    <div class="panel-title-bar">
      <div class="panel-title"><span>根据您的资产</span><span data-bind="text: asset"></span><span>万元，为您推荐如下配置方案：</span></div>
    </div>
    <div class="space-vertical-s"></div>
    <div class="panel-inner">
      <div data-bind="foreach: portfolios" class="container">
        <div class="value-bar"><a href="#" data-bind="text: name, style:{width: $root.titleWidthPercent + '%'}" class="button value-bar--title"></a>
          <!-- ko foreach: products--><a href="#" data-bind="style:{width: $root.productWidth($data, $parent)}, click:$root.setSelectedProduct" class="button value-bar--selectable"><span data-bind="text: $data.product.name" class="value-bar--item-title"></span><span data-bind="text: $root.productDescription($data)" class="value-bar--item-detail"></span></a>
          <!-- /ko-->
        </div>
        <div class="space-vertical-s"></div>
      </div>
    </div>
  </div>
  <div class="space-vertical-s"></div>
  <div class="panel">
    <div class="panel-title-bar">
      <div class="panel-title"><span>推荐产品</span></div>
    </div>
    <!-- Use template-name to detect which template to use-->
    <!-- ko template: {name: template_name, data: products}-->
    <!-- /ko-->
  </div>
  <div class="space-vertical-s"></div>
{% endblock %}

{% block ko-template %}
<!-- trust-table template render the model's trusts array into a table-->
  <!-- It is used in trust_home, trust_products, personal page-->
  <script type="text/html" id="trust-table">
    <table class="trust-table">
      <thead>
        <tr>
          <th colspan="1"></th>
          <th colspan="4">产品名称</th>
          <th colspan="2">资金门槛</th>
          <th colspan="2">产品期限</th>
          <th colspan="2">预期收益</th>
          <th colspan="2">投资行业</th>
          <th colspan="2">信托分类</th>
          <th colspan="2">信托公司</th>
          <th colspan="2"></th>
        </tr>
      </thead>
      <tbody data-bind="foreach: $data">
        <tr>
          <td colspan="1" data-bind="text: ($index() + 1)"></td>
          <td colspan="4" data-bind="text: name">名字</td>
          <td colspan="2" data-bind="text: Math.round(investment_threshold) + '万'">100万</td>
          <td colspan="2" data-bind="text: period + '个月'">12个月</td>
          <td colspan="2" data-bind="text: expected_earning_rate.toFixed(2) + '%'">13.00%</td>
          <td colspan="2" data-bind="text: usage">房地产</td>
          <td colspan="2" data-bind="text: type">货款类</td>
          <td colspan="2" data-bind="text: issuer_short_name">甘肃信托</td>
          <td colspan="2"><a href="#" class="button button-mini button-warning">详情</a></td>
        </tr>
      </tbody>
    </table>
  </script>
  <!-- financing-table render model's products array as financing products-->
  <!-- used by financing_products, financing_home, personal page-->
  <script type="text/html" id="financing-table">
    <table class="trust-table">
      <thead>
        <tr>
          <th colspan="1">排名</th>
          <th colspan="4">产品名称</th>
          <th colspan="2">发行银行</th>
          <th colspan="2">管理期限</th>
          <th colspan="2">收益类型</th>
          <th colspan="2">预期收益</th>
          <th colspan="2">起购金额</th>
          <th colspan="1"></th>
        </tr>
      </thead>
      <tbody data-bind="foreach: $data">
        <tr>
          <td colspan="1" data-bind="text: $index() + 1">1</td>
          <td colspan="4" data-bind="text: name"></td>
          <td colspan="2" data-bind="text: bank_name"></td>
          <td colspan="2" data-bind="text: period + '个月'">24个月</td>
          <td colspan="2" data-bind="text: profit_type">保本浮动</td>
          <td colspan="2" data-bind="text: max_expected_profit_rate + '%'">10%</td>
          <td colspan="2" data-bind="text: invest_threshold + '万'">10万</td>
        </tr>
      </tbody>
    </table>
  </script>
  <!-- funds-table render-->
  <script type="text/html" id="fund-table">
    <table class="trust-table">
      <thead>
        <tr>
          <th colspan="2">代码</th>
          <th colspan="3">基金名称</th>
          <th colspan="2">基金类型</th>
          <th colspan="2">单位净值</th>
          <th colspan="2">日涨幅</th>
          <th colspan="2">近一月涨幅</th>
          <th colspan="2">近三月涨幅</th>
          <th colspan="2">近半年涨幅</th>
          <th colspan="2">前端|后端费率</th>
          <th colspan="2"></th>
        </tr>
      </thead>
      <tbody data-bind="foreach: $data">
        <tr>
          <td colspan="2" data-bind="text: product_code"></td>
          <td colspan="3" data-bind="text: name"></td>
          <td colspan="2" data-bind="text: type"></td>
          <td colspan="2" data-bind="text: face_value">单位净值</td>
          <td colspan="2" data-bind="text: rate_day + '%'">日涨幅</td>
          <td colspan="2" data-bind="text: profit_rate_month + '%'">近一月涨幅</td>
          <td colspan="2" data-bind="text: profit_rate_3months + '%'">近三月涨幅</td>
          <td colspan="2" data-bind="text: profit_rate_6months + '%'">近六月涨幅</td>
          <td colspan="2" data-bind="text: $root.frontEndRate($data) + '|' + $root.backEndRate($data)">前端费率|后端费率</td>
          <td colspan="2"></td>
        </tr>
      </tbody>
    </table>
  </script>
  <script type="text/html" id="no-products-available">
    <div style="text-align: center; font-size: 1.3em; padding: 1em;">没有相关的推荐产品</div>
  </script>

  <!-- The survey-->
  <div id="propertyPlan" tabindex="-1" class="modal">
    <div class="modal-header">
      <h3 class="font-l">找到适合您的资产配置方案</h3>
    </div>
    <div class="modal-body">
      <form>
        <div data-bind="foreach: questions" class="row">
          <div class="question-box"><span data-bind="text: $index()+1" class="question-number pull-left">1</span>
            <dl class="question-container">
              <dt data-bind="text: question" class="question-title"></dt>
              <!--ko if: _.has($data, 'options')-->
              <!--ko foreach: options-->
              <dd class="question-choice">
                <label>
                  <input id="plan1_1" type="radio" data-bind="checked: $parent.answer, checkedValue:$data, attr:{name: $parent.question, id: $parent.question + $index()}"><span data-bind="text: title"></span>
                </label>
              </dd>
              <!-- /ko-->
              <!-- /ko-->
              <!--ko if: _.has($data, 'input')-->
              <dd class="question-choice">
                <input type="text" data-bind="value: answer"><span data-bind="text: $data.input.suffix"></span>
              </dd>
              <!-- /ko-->
            </dl>
          </div>
        </div>
        <div class="space-vertical-s"></div>
        <div class="row">
          <div class="prefix10 span2-omega">
            <button data-bind="click: finishSurvey" class="button-middle button-warning">完成</button>
          </div>
        </div>
        <div class="space-vertical-s"></div>
      </form>
    </div>
  </div>
{% endblock %}

{% block javascript %}
  {{  block.super }}
  <script src="{% static "wanglibao/js/jquery.modal.min.js" %}"></script>
  <script src="{% static "wanglibao/js/underscore-min.js" %}"></script>
  <script src="{% static "wanglibao/js/knockout-3.0.0.js" %}"></script>
  <script src="{% static "wanglibao/javascripts/consult.js" %}"></script>
{% endblock %}

